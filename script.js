document.addEventListener('DOMContentLoaded', function() {
    // Общие функции
    initMobileMenu();
    initImageGallery();
    
    // Инициализация страниц
    if (document.querySelector('.tours-list')) {
        initToursPage();
    }
    
    if (document.querySelector('.tour-detail')) {
        initTourDetailPage();
    }
    
    if (document.querySelector('.reviews')) {
        initReviewsPage();
    }
    
    if (document.querySelector('#review-form')) {
        initReviewForm();
    }
});

function initMobileMenu() {
    const menuToggle = document.createElement('div');
    menuToggle.className = 'menu-toggle';
    menuToggle.innerHTML = '☰';
    menuToggle.addEventListener('click', function() {
        const nav = document.querySelector('.nav ul');
        nav.classList.toggle('active');
    });
    
    const header = document.querySelector('.header .container');
    if (header) {
        header.prepend(menuToggle);
    }
}

function initImageGallery() {
    const thumbnails = document.querySelectorAll('.thumbnails img');
    if (!thumbnails.length) return;
    
    const mainImage = document.querySelector('.main-image img');
    if (!mainImage) return;
    
    thumbnails.forEach(thumb => {
        thumb.addEventListener('click', function() {
            mainImage.src = this.src.replace('150x100', '800x500');
        });
    });
}

function initToursPage() {
    loadTours();
    
    const applyFiltersBtn = document.getElementById('apply-filters');
    if (applyFiltersBtn) {
        applyFiltersBtn.addEventListener('click', loadTours);
    }
    
    const urlParams = new URLSearchParams(window.location.search);
    const regionParam = urlParams.get('region');
    
    if (regionParam && document.getElementById('region')) {
        document.getElementById('region').value = regionParam;
        loadTours();
    }
}

function loadTours() {
    const region = document.getElementById('region')?.value || 'all';
    const type = document.getElementById('type')?.value || 'all';
    const price = document.getElementById('price')?.value || 'all';
    const toursGrid = document.querySelector('.tours-grid');
    
    if (!toursGrid) return;
    
    const mockTours = getMockTours().filter(tour => {
        let match = true;
        
        if (region !== 'all' && tour.region !== region) match = false;
        if (type !== 'all' && tour.type !== type) match = false;
        if (price !== 'all') {
            const [min, max] = price.split('-').map(p => {
                if (p.endsWith('+')) return parseInt(p);
                return parseInt(p) || 0;
            });
            
            if (max && (tour.price < min || tour.price > max)) match = false;
            if (price.endsWith('+') && tour.price < min) match = false;
        }
        
        return match;
    });
    
    toursGrid.innerHTML = '';
    
    if (mockTours.length === 0) {
        toursGrid.innerHTML = '<p class="no-results">По вашему запросу туров не найдено. Попробуйте изменить параметры поиска.</p>';
        return;
    }
    
    mockTours.forEach(tour => {
        const tourCard = document.createElement('div');
        tourCard.className = 'tour-card';
        tourCard.innerHTML = `
            <img src="${tour.image}" alt="${tour.title}">
            <h3>${tour.title}</h3>
            <p>${tour.duration} / ${tour.price.toLocaleString('ru-RU')} руб.</p>
            <a href="tour-detail.html?id=${tour.id}" class="btn">Подробнее</a>
        `;
        toursGrid.appendChild(tourCard);
    });
}

function getMockTours() {
    return [
        {
            id: 1,
            title: 'Золотое кольцо',
            duration: '8 дней',
            price: 45000,
            region: 'central',
            type: 'excursion',
            image: 'Img/goldring.png'
        },
        {
            id: 2,
            title: 'Северное сияние: Путешествие по Карелии',
            duration: '5 дней',
            price: 38000,
            region: 'northwest',
            type: 'active',
            image: 'Img/karelia.png'
        },
        {
            id: 3,
            title: 'Сибирское путешествие',
            duration: '10 дней',
            price: 75000,
            region: 'siberia',
            type: 'active',
            image: 'https://via.placeholder.com/300x200?text=Камчатка'
        },
        {
            id: 4,
            title: 'Сказочный Алтай',
            duration: '6 дней',
            price: 45000,
            region: 'siberia',
            type: 'active',
            image: 'https://via.placeholder.com/300x200?text=Камчатка'
        },
        {
            id: 5,
            title: 'Сокровища Байкала',
            duration: '6 дней',
            price: 48000,
            region: 'siberia',
            type: 'active',
            image: 'https://via.placeholder.com/300x200?text=Камчатка'
        },
        {
            id: 6,
            title: 'Сокровища Сахалина',
            duration: '7 дней',
            price: 55000,
            region: 'far-east',
            type: 'active',
            image: 'https://via.placeholder.com/300x200?text=Сахалин'
        },
        {
            id: 7,
            title: 'Дагестан',
            duration: '7 дней',
            price: 50000,
            region: 'kavkaz',
            type: 'active',
            image: 'https://via.placeholder.com/300x200?text=Кавказ'
        }
    ];
}

function initTourDetailPage() {
    const urlParams = new URLSearchParams(window.location.search);
    const tourId = parseInt(urlParams.get('id'));
    
    if (isNaN(tourId)) {
        window.location.href = 'tours.html';
        return;
    }
    
    loadTourDetails(tourId);
}

function loadTourDetails(tourId) {
    const mockTours = [
        {
            id: 1,
            title: 'Золотое кольцо',
            duration: '7 дней',
            price: 45000,
            image: 'Img/goldring.png',
            description: 'Тур по древним городам Северо-Восточной Руси, сохранившим уникальные памятники истории и культуры России. В программе: Сергиев Посад, Переславль-Залесский, Ростов Великий, Ярославль, Кострома, Иваново, Суздаль и Владимир.',
            program: [
                { day: 'День 1: Москва', description: 'Утро: прибытие в Москву и размещение в отеле.</p> День: обзорная экскурсия по Москве (Красная площадь, Кремль, Храм Василия Блаженного).</p> Вечер: ужин в ресторане с традиционной русской кухней.' },
                { day: 'День 2: Сергиев Посад', description: 'Утро: завтрак в отеле, выезд в Сергиев Посад (70 км).</p> День: посещение Троице-Сергиевой лавры, экскурсия по монастырю.</p> Вечер: возвращение в Москву, свободное время.' },
                { day: 'День 3: Ростов Великий', description: 'Утро: завтрак, выезд в Ростов Великий (200 км).</p> День: экскурсия по Ростовскому кремлю и музею "Ростовский фарфор".</p> Вечер: ночь в Ростове, ужин в местном ресторане.' },
                { day: 'День 4: Ярославль', description: 'Утро: завтрак, выезд в Ярославль (60 км).</p> День: обзорная экскурсия по Ярославлю (Церковь Ильи Пророка, набережная Волги).</p> Вечер: ужин и свободное время.' },
                { day: 'День 5: Кострома', description: 'Утро: завтрак, выезд в Кострому (100 км).</p> День: посещение Ипатьевского монастыря и музея "Снегирь".</p> Вечер: ночь в Костроме, ужин.' },
                { day: 'День 6: Иваново', description: 'Утро: завтрак, выезд в Иваново (70 км).</p> День: экскурсия по городу, посещение музея текстиля.</p> Вечер: возвращение в Кострому, ужин.' },
                { day: 'День 7: Владимир', description: 'Утро: завтрак, выезд во Владимир (150 км).</p> День: посещение Успенского собора и Золотых ворот.</p> Вечер: возвращение в Москву, завершение тура.' }
            ],
            includes: [
                'Проживание в отелях 3 звезды',
                'Питание: завтраки и ужины',
                'Транспорт: комфортабельный автобус',
                'Экскурсии с профессиональными гидами'
            ]
        },
        {
            id: 2,
            title: 'Северное сияние: Путешествие по Карелии',
            duration: '5 дней',
            price: 38000,
            image: 'Img/karelia.png',
            description: 'Карелия — один из самых живописных регионов России, где можно увидеть волшебное северное сияние, бескрайние леса, кристально чистые озера и древние памятники природы. Этот тур идеально подойдет для любителей приключений, романтиков и тех, кто хочет погрузиться в атмосферу загадочного Севера.',
            program: [
                { day: 'День 1: Санкт-Петербург', description: 'Утро: прибытие в Санкт-Петербург, размещение в отеле.</p> День: обзорная экскурсия по городу (Невский проспект, Эрмитаж, Спас на Крови).</p> Вечер: ужин в ресторане с карельской кухней.' },
                { day: 'День 2: Петрозаводск', description: 'Утро: завтрак, выезд в Петрозаводск (около 400 км).</p> День: экскурсия по Петрозаводску (набережная Онежского озера, музей изобразительных искусств).</p> Вечер: ужин и свободное время.' },
                { day: 'День 3: Кижи', description: 'Утро: завтрак, выезд на пароме к острову Кижи.</p>День: посещение Кижского погоста, знакомство с деревянной архитектурой (Церковь Преображения Господня).</p>Вечер: возвращение в Петрозаводск, ужин.' },
                { day: 'День 4: Сортавала и Рускеала', description: 'Утро: завтрак, выезд в Сортавалу (160 км).</p> День: обзорная экскурсия по Сортавале, посещение водопада Ахвенкоски. Далее поездка в парк "Рускеала" для осмотра мраморного каньона.</p>Вечер: ночь в Сортавале, ужин в местном ресторане.' },
                { day: 'День 5: Возвращение в Санкт-Петербург', description: 'Утро: завтрак, выезд обратно в Санкт-Петербург (около 400 км).</p> День: свободное время для покупок или дополнительных экскурсий.</p> Вечер: прощальный ужин и завершение тура.' }
            ],
            includes: [
                'Проживание в отелях 3 звезды',
                'Питание: завтраки и ужины',
                'Транспорт: комфортабельный автобус',
                'Экскурсии с профессиональными гидами',
                'Дополнительно: Возможность продления тура или добавления дополнительных экскурсий по желанию'
            ]
        },
        {
            id: 3,
            title: 'Сибирское путешествие',
            duration: '10 дней',
            price: 75000,
            image: 'https://via.placeholder.com/800x500?text=Сибирь',
            description: '«Сибирское путешествие» — это познавательный или приключенческий тур по Сибири, который может включать посещение природных достопримечательностей, исторических мест и знакомство с культурой этого региона.',
            program: [
                { day: 'День 1: Новосибирск', description: 'Утро: прибытие в Новосибирск, размещение в отеле.</p>  День: обзорная экскурсия по городу (Новосибирский зоопарк, театр оперы и балета).</p> Вечер: ужин в ресторане с сибирской кухней.' },
                { day: 'День 2: Барнаул', description: 'Утро: завтрак, выезд в Барнаул (220 км).</p> День: посещение исторического центра Барнаула (Музей истории Алтайского края, Пролетарский мост).</p> Вечер: ужин и ночь в Барнауле.' },
                { day: 'День 3: Горно-Алтайск', description: 'Утро: завтрак, выезд в Горно-Алтайск (200 км).</p> День: экскурсия по Горно-Алтайску (Музей алтайской культуры, смотровая площадка на горе Чике-Таман).</p> Вечер: ужин и ночь в Горно-Алтайске.' },
                { day: 'День 4: Алтайский заповедник', description: 'Утро: завтрак, выезд в Алтайский заповедник (50 км).</p> День: экскурсия по заповеднику (походы, наблюдение за дикой природой).</p> Вечер: ужин в традиционном алтайском стиле, ночь в гостинице у заповедника.' },
                { day: 'День 5: Бийск', description: 'Утро: завтрак, выезд в Бийск (150 км).</p> День: посещение Бийского краеведческого музея и парка "Соловьиная роща".</p> Вечер: ужин и ночь в Бийске.' },
                { day: 'День 6: Томск', description: 'Утро: завтрак, выезд в Томск (250 км).</p> День: обзорная экскурсия по Томску (Томский государственный университет, деревянные дома).</p> Вечер: ужин и ночь в Томске.' },
                { day: 'День 7: Кемерово', description: 'Утро: завтрак, выезд в Кемерово (100 км).</p> День: посещение Кемеровского областного музея изобразительных искусств и парка "Сосновый бор".</p> Вечер: ужин и ночь в Кемерово.' },
                { day: 'День 8: Красноярск', description: 'Утро: завтрак, выезд в Красноярск (200 км).</p> День: обзорная экскурсия по Красноярску (Красноярская крепость, Столбы).</p> Вечер: ужин и ночь в Красноярске.' },
                { day: 'День 9: Енисейский район', description: 'Утро: завтрак, выезд в Енисейский район.</p> День: экскурсия по Енисею (прогулка на катере, рыбалка).</p> Вечер: ужин на природе, ночь в палаточном лагере или гостинице.' },
                { day: 'День 10: Возвращение', description: 'Утро: завтрак, свободное время для покупок сувениров.</p> День: возвращение в Новосибирск, прощальный обед.</p> Вечер: отъезд.' }
            ],
            includes: [
                'Проживание в отелях 3 звезды',
                'Питание: завтраки и ужины',
                'Транспорт: комфортабельный автобус',
                'Экскурсии с профессиональными гидами',
                'Дополнительно: Возможность продления тура или добавления дополнительных экскурсий по желанию'
            ]
        },
        {
            id: 4,
            title: 'Сказочный Алтай',
            duration: '6 дней',
            price: 75000,
            image: 'https://via.placeholder.com/800x500?text=Сибирь',
            description: '"Сказочный Алтай" – это увлекательное путешествие по одному из самых живописных регионов России, где вас ждут горные пейзажи, чистейшие озёра, густые леса и богатая культура.',
            program: [
                { day: 'День 1: Горно-Алтайск', description: 'Утро: прибытие в Горно-Алтайск, размещение в отеле.</p> День: обзорная экскурсия по Горно-Алтайску (музей истории Алтая, памятник Алтайскому духу).</p> Вечер: ужин в национальном ресторане с блюдами алтайской кухни.' },
                { day: 'День 2: Алтайский заповедник', description: 'Утро: завтрак, выезд в Алтайский заповедник (30 км).</p> День: экскурсия по заповеднику, знакомство с флорой и фауной региона, пешие прогулки.</p> Вечер: возвращение в Горно-Алтайск, ужин и ночь в отеле.' },
                { day: 'День 3: Озеро Ая', description: 'Утро: завтрак, выезд к озеру Ая (40 км).</p> День: прогулка по озеру на катере, купание, отдых на пляже. Возможность попробовать водные виды спорта.</p> Вечер: ужин на берегу озера, ночь в гостинице у озера.' },
                { day: 'День 4: Шебалино', description: 'Утро: завтрак, выезд в Шебалино (50 км).</p> День: посещение природного парка "Шебалинский" — пешие маршруты, фотосессии на фоне водопадов и живописных пейзажей.</p> Вечер: ужин и ночь в уютном отеле в Шебалино.' },
                { day: 'День 5: Чуйский тракт и Курайская степь', description: 'Утро: завтрак, выезд по Чуйскому тракту (100 км).</p> День: остановка на смотровых площадках, фотографирование горных пейзажей и степей. Посещение исторических мест вдоль тракта.</p> Вечер: ужин в кемпинге на природе с костром, ночь в палатках или домиках.' },
                { day: 'День 6: Кош-Агач', description: 'Утро: завтрак, выезд в Кош-Агач (60 км).</p> День: посещение местных достопримечательностей (деревня Кош-Агач, знакомство с культурой местных народов).</p> Вечер: возвращение в Горно-Алтайск, прощальный ужин и завершение тура.' }
            ],
            includes: [
                'Проживание в отелях и гостевых домах',
                'Питание: завтраки и ужины',
                'Транспорт: комфортабельный автобус',
                'Экскурсии с профессиональными гидами',
                'Дополнительно: Возможность организовать мастер-классы по традиционным алтайским ремеслам (например, изготовление бижутерии из природных материалов)'
            ]
        },
        {
            id: 5,
            title: 'Сокровища Байкала',
            duration: '6 дней',
            price: 48000,
            image: 'https://via.placeholder.com/800x500?text=Сибирь',
            description: '"Сокровища Байкала" – это увлекательное путешествие по одному из самых красивых и загадочных мест России. Такой тур обычно включает посещение ключевых достопримечательностей озера Байкал, знакомство с местной природой, культурой и традициями.',
            program: [
                { day: 'День 1: Иркутск', description: 'Утро: прибытие в Иркутск, размещение в отеле.</p> День: обзорная экскурсия по Иркутску (Театр кукол, Костёл, памятник Александру III).</p> Вечер: ужин в ресторане с местной кухней.' },
                { day: 'День 2: Переезд на Ольхон', description: 'Утро: завтрак, выезд на Ольхон (около 250 км).</p> День: паромная переправа на остров, размещение в гостевом доме.</p>После обеда: прогулка по бухте Песчаная, купание.</p> Вечер: ужин с местными блюдами.' },
                { day: 'День 3: Мыс Хобой', description: 'Утро: завтрак, выезд к мысу Хобой (экскурсия на внедорожниках).</p> День: пеший поход к мысу, наслаждение видами Байкала, фотосессия.</p>После обеда: возвращение в поселок Хужир, свободное время.</p> Вечер: ужин в ресторане.' },
                { day: 'День 4: Листвянка', description: 'Утро: завтрак, выезд из Ольхона в Листвянку (переезд около 200 км).</p> День: посещение Байкальского музея, прогулка по набережной.</p> После обеда: поездка на канатной дороге на гору Крестовая.</p> Вечер: ужин в кафе с видом на Байкал.' },
                { day: 'День 5: Старая Листвянка и Кругобайкальская железная дорога', description: 'Утро: завтрак, экскурсия по Старой Листвянке (исторические здания, старинные церкви).</p> День: поездка по Кругобайкальской железной дороге с остановками для фотографий и прогулок.</p>После обеда: возвращение в Листвянку, свободное время для отдыха.</p> Вечер: ужин с традиционными байкальскими блюдами.' },
                { day: 'День 6: Возвращение в Иркутск', description: 'Утро: завтрак, выезд в Иркутск.</p> День: свободное время для покупок сувениров и отдыха.</p> После обеда: трансфер в аэропорт, завершение тура.' }
            ],
            includes: [
                'Проживание в отелях и гостевых домах',
                'Питание: завтраки и ужины',
                'Транспорт: комфортабельный автобус и внедорожники для экскурсийс',
                'Экскурсии с профессиональными гидами',
                'Дополнительно: Возможность организовать мастер-классы по народным ремеслам или занятия по экотуризму'
            ]
        },
        {
            id: 6,
            title: 'Сокровища Сахалина',
            duration: '7 дней',
            price: 55000,
            image: 'https://via.placeholder.com/800x500?text=Золотое+кольцо',
            description: '"Сокровища Сахалина" – это увлекательное путешествие по одному из самых загадочных и живописных регионов России. Сахалин, крупнейший остров страны, славится уникальной природой, богатой историей и культурным наследием.',
            program: [
                { day: 'День 1: Южно-Сахалинск', description: 'Утро: прибытие в Южно-Сахалинск, размещение в отеле.</p> День: обзорная экскурсия по городу (площадь Победы, собор, памятник А.С. Пушкину).</p> Вечер: ужин в ресторане с местной кухней.' },
                { day: 'День 2: Невельск и Тихая бухта', description: 'Утро: завтрак, выезд в Невельск (около 60 км).</p> День: прогулка по Невельску, посещение местных достопримечательностей.</p>После обеда: поездка на Тихую бухту, отдых на пляже.</p> Вечер: ужин на берегу моря.' },
                { day: 'День 3: Мыс Кекур', description: 'Утро: завтрак, выезд к мысу Кекур (экскурсия на внедорожниках).</p> День: пеший поход к мысу, наслаждение видами и фотографирование.</p>После обеда: возвращение в Южно-Сахалинск, свободное время.</p> Вечер: ужин в кафе.' },
                { day: 'День 4: Заповедник "Курильский"', description: 'Утро: завтрак,  выезд в заповедник "Курильский".</p> День: экскурсия по заповеднику, наблюдение за дикой природой и уникальной флорой и фауной.</p>После обеда: пикник на свежем воздухе.</p> Вечер: возвращение в Южно-Сахалинск, ужин.' },
                { day: 'День 5: Курилы (остров Итуруп)', description: 'Утро: завтрак, выезд на пароме на остров Итуруп.</p> День: обзорная экскурсия по острову (посещение горячих источников, водопадов).</p>После обеда: прогулка по живописным местам острова.</p> Вечер: ужин с морепродуктами.' },
                { day: 'День 6: Исследование Итурупа', description: 'Утро: завтрак, свободное время для самостоятельного изучения острова (возможность рыбной ловли или дайвинга).</p> День: посещение местных культурных достопримечательностей.</p>После обеда: возвращение на пароме в Южно-Сахалинск.</p> Вечер: прощальный ужин.' },
                { day: 'День 7: Возвращение', description: 'Утро: завтрак, свободное время для покупок сувениров.</p> День: трансфер в аэропорт, завершение тура.' }
            ],
            includes: [
                'Проживание в отелях и гостевых домах',
                'Питание: завтраки и ужины',
                'Транспорт: комфортабельный автобус и внедорожники для экскурсий',
                'Экскурсии с профессиональными гидами',
                'Дополнительно: возможность организовать мастер-классы по местным ремеслам или занятия по экотуризму'
            ]
        },
        {
            id: 7,
            title: 'Дагестан',
            duration: '7 дней',
            price: 50000,
            image: 'https://via.placeholder.com/800x500?text=Золотое+кольцо',
            description: '"Тур по Дагестану — это отличная возможность познакомиться с уникальной культурой, природой и традициями этого удивительного региона России. Дагестан богат историческими достопримечательностями, горными пейзажами, древними аулами и гостеприимными людьми.',
            program: [
                { day: 'День 1: Махачкала', description: 'Утро: прибытие в Махачкалу, размещение в отеле.</p> День: обзорная экскурсия по городу (памятник "Танец огня", мечеть "Султан Ахмед").</p> Вечер: ужин в национальном ресторане с дагестанскими блюдами.' },
                { day: 'День 2: Сулакский каньон', description: 'Утро: завтрак, выезд к Сулакскому каньону (70 км).</p> День: прогулка по каньону, возможность покататься на катере по реке Сулак, фотографирование с обзорных площадок.</p> Вечер: ужин в кафе с видом на каньон, ночь в гостинице рядом.' },
                { day: 'День 3: Дербент', description: 'Утро: завтрак, выезд в Дербент (120 км).</p> День: посещение Нарын-калы (Дербентская крепость), экскурсия по старому городу и музеям.</p> Вечер: ужин в местном ресторане, ночь в отеле в Дербенте.' },
                { day: 'День 4: Гергебиль"', description: 'Утро: завтрак,  выезд в Гергебиль (80 км).</p> День: прогулка по живописным горам, посещение водопадов и пейзажей, знакомство с культурой местного населения.</p> Вечер: ужин в горном ауле, ночь в гостевом доме.' },
                { day: 'День 5: Хунзах', description: 'Утро: завтрак, выезд в Хунзах (60 км).</p> День: эЭкскурсия по историческим местам (гробницы и крепости), пешие маршруты по живописным тропам.</p> Вечер: ужин с традиционными блюдами, ночь в гостинице.' },
                { day: 'День 6: Лезгинский национальный парк', description: 'Утро: завтрак, выезд в Лезгинский национальный парк (90 км).</p> День: пешие прогулки по парку, наблюдение за дикой природой и уникальной флорой.</p> Вечер: ужин на природе с костром, ночь в палаточном лагере или базовом лагере.' },
                { day: 'День 7: Каспийское море', description: 'Утро: завтрак, выезд к Каспийскому морю (100 км).</p> День: отдых на пляже, купание и водные виды спорта.</p>Вечер: прощальный ужин в ресторане на берегу моря, завершение тур.' }
            ],
            includes: [
                'Проживание в отелях и гостевых домах',
                'Питание: завтраки и ужины',
                'Транспорт: комфортабельный автобус',
                'Экскурсии с профессиональными гидами',
                'Дополнительно: возможность организовать мастер-классы по традиционным дагестанским ремеслам (например, изготовление керамики или ткачество)'
            ]
        },
        {
            id: 8,
            title: 'Северная Осетия',
            duration: '6 дней',
            price: 45000,
            image: 'https://via.placeholder.com/800x500?text=Сибирь',
            description: '"Сокровища Байкала" – это увлекательное путешествие по одному из самых красивых и загадочных мест России. Такой тур обычно включает посещение ключевых достопримечательностей озера Байкал, знакомство с местной природой, культурой и традициями.',
            program: [
                { day: 'День 1: Владикавказ', description: 'Утро: прибытие в Иркутск, размещение в отеле.</p> День: обзорная экскурсия по Иркутску (Театр кукол, Костёл, памятник Александру III).</p> Вечер: ужин в ресторане с местной кухней.' },
                { day: 'День 2: Переезд на Ольхон', description: 'Утро: завтрак, выезд на Ольхон (около 250 км).</p> День: паромная переправа на остров, размещение в гостевом доме.</p>После обеда: прогулка по бухте Песчаная, купание.</p> Вечер: ужин с местными блюдами.' },
                { day: 'День 3: Цейское ущелье', description: 'Утро: завтрак, выезд к мысу Хобой (экскурсия на внедорожниках).</p> День: пеший поход к мысу, наслаждение видами Байкала, фотосессия.</p>После обеда: возвращение в поселок Хужир, свободное время.</p> Вечер: ужин в ресторане.' },
                { day: 'День 4: Казбек (по возможности)', description: 'Утро: завтрак, выезд из Ольхона в Листвянку (переезд около 200 км).</p> День: посещение Байкальского музея, прогулка по набережной.</p> После обеда: поездка на канатной дороге на гору Крестовая.</p> Вечер: ужин в кафе с видом на Байкал.' },
                { day: 'День 5: Фарнский водопад', description: 'Утро: завтрак, экскурсия по Старой Листвянке (исторические здания, старинные церкви).</p> День: поездка по Кругобайкальской железной дороге с остановками для фотографий и прогулок.</p>После обеда: возвращение в Листвянку, свободное время для отдыха.</p> Вечер: ужин с традиционными байкальскими блюдами.' },
                { day: 'День 6: Владикавказ', description: 'Утро: завтрак, выезд в Иркутск.</p> День: свободное время для покупок сувениров и отдыха.</p> После обеда: трансфер в аэропорт, завершение тура.' }
            ],
            includes: [
                'Проживание в отелях и гостевых домах',
                'Питание: завтраки и ужины',
                'Транспорт: комфортабельный автобус и внедорожники для экскурсийс',
                'Экскурсии с профессиональными гидами',
                'Дополнительно: Возможность организовать мастер-классы по народным ремеслам или занятия по экотуризму'
            ]
        }
    ];
    
    const tour = mockTours.find(t => t.id === tourId);
    
    if (!tour) {
        window.location.href = 'tours.html';
        return;
    }
    
    // Заполняем данные
    document.getElementById('tour-title').textContent = tour.title;
    document.getElementById('tour-duration').textContent = `Длительность: ${tour.duration}`;
    document.getElementById('tour-price').textContent = `Цена: ${tour.price.toLocaleString('ru-RU')} руб.`;
    
    const mainImage = document.getElementById('tour-main-image');
    if (mainImage) {
        mainImage.src = tour.image;
        mainImage.alt = tour.title;
    }
    
    const description = document.getElementById('tour-description');
    if (description) {
        description.textContent = tour.description;
    }
    
    // Заполняем программу
    const programContainer = document.getElementById('tour-program');
    if (programContainer) {
        programContainer.innerHTML = '';
        
        tour.program.forEach(item => {
            const dayElement = document.createElement('div');
            dayElement.className = 'day';
            dayElement.innerHTML = `
                <h4>${item.day}</h4>
                <p>${item.description}</p>
            `;
            programContainer.appendChild(dayElement);
        });
    }
    // Заполняем включенные услуги
    const includesContainer = document.getElementById('tour-includes');
    if (includesContainer) {
        includesContainer.innerHTML = '';
        
        tour.includes.forEach(item => {
            const li = document.createElement('li');
            li.textContent = item;
            includesContainer.appendChild(li);
        });
    }
}

function initReviewsPage() {
    const tourSelect = document.getElementById('tour-select');
    const urlParams = new URLSearchParams(window.location.search);
    const tourParam = urlParams.get('tour');
    
    if (tourParam && tourSelect) {
        tourSelect.value = tourParam;
        filterReviews();
    }
    
    if (tourSelect) {
        tourSelect.addEventListener('change', filterReviews);
    }
}

function filterReviews() {
    const tourId = document.getElementById('tour-select').value;
    const reviews = document.querySelectorAll('.review');
    
    reviews.forEach(review => {
        const reviewTour = review.querySelector('.review-tour');
        if (!reviewTour) return;
        
        const reviewTourText = reviewTour.textContent.split(': ')[1];
        const mockTourIds = {
            'Золотое кольцо': '1',
            'Озеро Байкал': '2',
            'Камчатка': '3'
        };
        
        const currentTourId = mockTourIds[reviewTourText];
        
        if (tourId === 'all' || currentTourId === tourId) {
            review.style.display = 'block';
        } else {
            review.style.display = 'none';
        }
    });
}

function initReviewForm() {
    const form = document.getElementById('review-form');
    if (!form) return;
    
    form.addEventListener('submit', function(e) {
        e.preventDefault();
        
        const name = document.getElementById('review-name').value;
        const tourId = document.getElementById('review-tour').value;
        const rating = document.getElementById('review-rating').value;
        const text = document.getElementById('review-text').value;
        
        alert('Спасибо за ваш отзыв! После модерации он будет опубликован.');
        form.reset();
    });
}